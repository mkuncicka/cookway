swagger: '2.0'
info:
  title: Cookway - the way to cook
  description: Web application with recipes
  version: 1.0.0
  contact:
    email: mkuncicka@gmail.com
basePath: /api
tags:
  - name: Core
    description: Endpoints connected with system core functionality
  - name: Recipes
    description: Endpoints connected with recipes functionality
  - name: User
    description: Endpoints connected with user management functionality
schemes:
  - http
  - https
paths:
  # CORE - Security
  /security/login:
    post:
      summary: Login
      operationId: LoginHandler
      tags:
        - Core
      parameters:
        - name: content
          description: Login data
          in: body
          required: true
          schema:
            $ref: '#/definitions/Login'
      responses:
        '200':
          description: Login succeed
        '403':
          description: Login failed
  /security/logout:
    post:
      summary: Logout
      operationId: LogoutHandler
      tags:
        - Core
      responses:
        '200':
          description: Logout succeed
  # RECIPES
  /recipes:
    get:
      summary: List of recipes
      operationId: RecipeListQuery
      tags:
        - Recipes
      parameters:
        - name: filter
          in: body
          schema:
           $ref: '#/definitions/Filter'
          required: true
      responses:
        '200':
          description: List of all recipes correctly returned
          schema:
            $ref: '#/definitions/RecipeList'
        '403':
          description: Request failed
  /recipes/user/{id}:
    get:
      summary: List of single user's recipes
      operationId: UsersRecipeListQuery
      tags:
        - Recipes
      parameters:
        - name: id
          in: path
          type: integer
          required: true
      responses:
        '200':
          description: List of user's recipes correctly returned
          schema:
            $ref: '#/definitions/RecipeList'
        '400':
          description: Bad user id given
  /recipes/details/{id}:
    get:
      summary: Details of a single recipe
      operationId: RecipeDetailesQueryHandler
      tags:
        - Recipes
      parameters:
        - name: id
          in: path
          type: integer
          required: true
      responses:
        '200':
          description: Request succeed
          schema:
            $ref: '#/definitions/RecipeListItemView'
  /recipes/new:
    post:
      summary: Intention of creation a new recipe - adds new recipe to the database
      operationId: NewRecipeHandler
      tags:
        - Recipes
      parameters:
        - name: recipe
          in: body
          schema:
            $ref: '#/definitions/NewRecipe'
          required: true
      responses:
        '200':
          description: Request succeed
definitions:
  Login:
    title: Login
    description: Login parameters
    required:
      - username
      - password
    properties:
      username:
        type: string
      password:
        type: string
  RecipeList:
    title: List of recipes
    description: List of recipes
    required:
      - data
      - totalCount
    properties:
      totalCount:
        title: Total count of recipes
        type: integer
      data:
        title: List of recipes
        type: array
        items:
          $ref: '#/definitions/RecipeListItemView'
  RecipeListItemView:
    title: Single recipe view model
    description: Single recipe view model presented on the list
    required:
      - title
      - ingredients
      - prescription
    properties:
      title:
        title: Title of the recipe
        type: string
      description:
        title: Description of the recipe
        type: string
      ingredients:
        title: List of ingredients
        type: array
        items:
          $ref: '#/definitions/IngredientList'
      prescription:
        title: Prescription
        type: string
      preparationTime:
        title: Time of preparation in minutes
        type: integer
      preparationTimeText:
        title: Additional text to preparation time
        description: Text explaining what is included inpreparation time
        type: string
      author:
        title: Author's name
        type: string
      photos:
        title: List of photos
        type: array
        items:
          $ref: '#/definitions/PhotoItemView'
  PhotoItemView:
    title: Single photo view model
    description: Single photo view model connected with recipe
    required:
      - id
      - name
      - url
    properties:
      id:
        title: Photo's id
        type: integer
      name:
        title: Photo's name
        type: string
      url:
        title: Photo's displaying url
        type: string
      isMain:
        title: Information is it main photo of the recipe
        type: boolean
  IngredientList:
    title: List of ingredients
    description: List of ingredients
    required:
      - data
      - totalCount
    properties:
      totalCount:
        title: Total count of ingredients
        type: integer
      data:
        title: List of ingredients
        type: array
        items:
          $ref: '#/definitions/IngredientListItemView'
  IngredientListItemView:
    title: Single ingredient view model
    description: Single ingredient view model presented on the list
    required:
      - name
      - systemName
      - amount
      - unitName
    properties:
      name:
        title: Name of the ingredient
        type: string
      systemName:
        title: System name of the ingredient
        type: string
      amount:
        title: Amount of the ingredient
        type: number
      unitName:
        title: Unit of the ingredient amount
        type: string
  Filter:
    title: Filter
    required:
      - filterName
      - filterContent
      - dataType
    properties:
      filterName:
        title: Filter name
        type: string
      filterContent:
        title: Filter content
        type: string
      dataType:
        title: Filter data type
        type: string
  NewRecipe:
    title: Recipe model view
    required:
      - title
      - prescription
    properties:
      title:
        title: Title of the recipe
        type: string
      ingredientsIds:
        title: Ingredients from database
        type: array
        items:
          type: integer
      description:
        title: Description
        type: string
      prescription:
        title: Instructions how to make a meal
        type: string
      preparationTime:
        title: Time of preparation
        type: integer
      preparationTimeText:
        title: Additional text explaining time of preparation
        type: string
      photoId:
        title: Photo of the meal
        type: integer